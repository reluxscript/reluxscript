// Generated by ReluxScript compiler
// Do not edit manually

use swc_common::{Span, DUMMY_SP, SyntaxContext};
use swc_ecma_ast::*;
use swc_ecma_visit::{Visit, VisitMut, VisitMutWith, VisitWith};
use std::collections::HashMap;

#[derive(Clone, Debug)]
enum CustomPropValue {
    Bool(bool),
    I32(i32),
    I64(i64),
    F64(f64),
    Str(String),
}

#[derive(Clone, Debug)]
struct State {
    processed_count: i32,
    // Auto-generated: Custom AST property storage
    __custom_props: std::collections::HashMap<usize, std::collections::HashMap<String, CustomPropValue>>,
}

impl State {
    fn get_node_id<T>(&self, node: &T) -> usize {
        // Use node memory address as ID
        node as *const T as usize
    }
    
    fn set_custom_prop<T>(&mut self, node: &T, prop: &str, value: CustomPropValue) {
        let node_id = self.get_node_id(node);
        self.__custom_props
            .entry(node_id)
            .or_insert_with(std::collections::HashMap::new)
            .insert(prop.to_string(), value);
    }
    
    fn get_custom_prop<T>(&self, node: &T, prop: &str) -> Option<&CustomPropValue> {
        let node_id = self.get_node_id(node);
        self.__custom_props
            .get(&node_id)
            .and_then(|m| m.get(prop))
    }
    
    fn delete_custom_prop<T>(&mut self, node: &T, prop: &str) {
        let node_id = self.get_node_id(node);
        if let Some(props) = self.__custom_props.get_mut(&node_id) {
            props.remove(prop);
        }
    }
}

pub struct CustomPropsComprehensive {
    pub state: State,
}

impl VisitMut for CustomPropsComprehensive {
    fn visit_mut_jsx_element(&mut self, node: &mut JSXElement) {
        self.state.set_custom_prop(node, "__componentName", CustomPropValue::Str("Button".to_string()));
        self.state.set_custom_prop(node, "__isProcessed", CustomPropValue::Bool(true));
        self.state.set_custom_prop(node, "__visitCount", CustomPropValue::I32(1));
        if let Some(name) = self.state.get_custom_prop(node, "__componentName").and_then(|v| if let CustomPropValue::Str(v) = v { Some(v.clone()) } else { None }) {
            self.state.processed_count = (self.state.processed_count + 1)
        }
        if let Some(is_proc) = self.state.get_custom_prop(node, "__isProcessed").and_then(|v| if let CustomPropValue::Bool(v) = v { Some(v.clone()) } else { None }) {
            if is_proc {
                self.state.set_custom_prop(node, "__visitCount", CustomPropValue::I32(2))
            }
        }
        if let Some(count) = self.state.get_custom_prop(node, "__visitCount").and_then(|v| if let CustomPropValue::I32(v) = v { Some(v.clone()) } else { None }) {
            self.state.set_custom_prop(node, "__visitCount", CustomPropValue::I32((count + 1)))
        }
    }
    
}

impl CustomPropsComprehensive {
    pub fn new() -> Self {
        Self {
            state: State {
                processed_count: 0,
                __custom_props: std::collections::HashMap::new(),
            },
        }
    }
    
}

